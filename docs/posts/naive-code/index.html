<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Ryan Heslin">
<meta name="dcterms.date" content="2023-07-13">
<title>Verso - The Unexpected Pleasures of Naive Code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script><link rel="stylesheet" href="../../styles.css">
</head>
<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Verso</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ryan-heslin"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/ryan-heslin/">LinkedIn</a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">The Unexpected Pleasures of Naive Code</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">miscellany</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ryan Heslin </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 13, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><p>As a moderator of a technical Discord server, I’ve encountered a lot of “naive” code. In computer science, a “naive” solution to a problem is an obvious, straightforward approach someone with no special knowledge might offer as a first attempt. Textbooks often present one before revealing a much more efficient, if less obvious, alternative. <a href="https://en.wikipedia.org/wiki/Bubble_sort">Bubble sort</a> is simple enough that a novice programmer might discover it themselves. <a href="https://en.wikipedia.org/wiki/Merge_sort">Merge sort</a> is much harder to understand (at least if you’re not <a href="https://en.wikipedia.org/wiki/John_von_Neumann">John von Neumann</a>), but it’s much more efficient on large inputs.</p>
<p>For our purposes, naive code comes from an enthusiastic but inexperienced user trying to solve a problem at the edge of their abilities. Naive code is fascinating. It is rarely good, since its authors know little of sound practices or language conventions. It contains strange design choices and sometimes outright errors. But these same defects make it oddly charming, as we’ll see.</p>
<section id="an-analogy" class="level1"><h1>An Analogy</h1>
<p>Obviously, the best way to illustrate this is to analyze some ABBA lyrics. Here are the opening lines of “Dancing Queen” (<a href="https://www.youtube.com/watch?v=xFrGuyw1V8s">here</a>, if somehow you haven’t heard it before):</p>
<pre><code>You can dance
You can jive
Having the time of your life
Ooh, see that girl
Watch that scene
Digging the dancing queen</code></pre>
<p>It’s easy to miss on a first listen, but these lyrics don’t sound natural in any widely spoken form of English. “Jive” isn’t typically used as a verb. “Scene” isn’t typically used to mean “situation”; you would say “check it out” or “look over there,” not “watch that scene.” Who is the singer addressing, anyway? It seems like the first three lines refer to the “dancing queen” herself, but the last three address an observer who is “digging” her.</p>
<p>The reason for this is simple. ABBA hail from Sweden; they are songwriters whose first language is Swedish trying hard to sound like Americans, but not quite passing. But it’s hard to notice this beneath the song’s amazing arrangement and vocal performances. What’s more, I think the song would be <em>worse</em> if it used more idiomatic English. Laden with dated slang they may be, the lyrics feel oddly timeless, because they don’t sound like any common form of English. Songs written in authentic 1970s American English usually aren’t so lucky. The words somehow convey the song’s message perfectly even though, taken literally, they barely make sense.</p>
<p>(Related: it bothers me more than it should that <a href="https://www.youtube.com/watch?v=Sj_9CiNkkn4">another ABBA song</a> incorrectly claims Napoleon surrendered at Waterloo. His army was routed there, but he actually surrendered to a British warship about a month later. Then again, I doubt even ABBA could make “At Waterloo, Napoleon was decisively defeated” scan).</p>
</section><section id="naive-code" class="level1"><h1>Naive Code</h1>
<p>Naive code is compelling in quite a similar way. I could give examples from people I’ve helped, but I won’t; they didn’t volunteer to be included in my ramblings. Instead, I’ll use some very naive code I wrote long ago. Here is <code>coivd_19_us.R</code>, a snippet of R that does some simple data processing.<br>
Like everyone else in April 2020, I made some visualizations of COVID-19 data (though unlike most others, I managed to misspell the name of the disease). (If you don’t know R, the problems with the code below will still be obvious if you have any programming experience).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">state_pop</span> <span class="op">&lt;-</span> <span class="fu">read_xlsx</span><span class="op">(</span><span class="st">"states_pop_data.xlsx"</span>, col_names <span class="op">=</span> <span class="cn">F</span>, skip <span class="op">=</span> <span class="fl">9</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">51</span>, <span class="op">]</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">...1</span>, <span class="va">...13</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>...1 <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">...1</span>, <span class="st">"."</span><span class="op">)</span>, ...13 <span class="op">=</span> <span class="va">...13</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rename</span><span class="op">(</span><span class="st">"state"</span> <span class="op">=</span> <span class="va">...1</span>, <span class="st">"state_pop"</span> <span class="op">=</span> <span class="va">...13</span><span class="op">)</span>

<span class="va">county_pop</span> <span class="op">&lt;-</span> <span class="fu">read_xlsx</span><span class="op">(</span><span class="st">"county_pop_data.xlsx"</span>, col_names <span class="op">=</span> <span class="cn">F</span>, skip <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3142</span>, <span class="op">]</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">...1</span>, <span class="va">...12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">separate</span><span class="op">(</span><span class="va">...1</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"county"</span>, <span class="st">"state"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">",\\s"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rename</span><span class="op">(</span>county_pop <span class="op">=</span> <span class="va">...12</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>county <span class="op">=</span> <span class="fu">str_replace</span><span class="op">(</span><span class="fu">str_replace</span><span class="op">(</span><span class="va">county</span>, <span class="st">"\\s[A-Z][a-z]*\\s*[A-Z]*[a-z]*$"</span>, <span class="st">""</span><span class="op">)</span>, <span class="st">"^\\."</span>, <span class="st">""</span><span class="op">)</span>, county_pop <span class="op">=</span> <span class="va">county_pop</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span>


<span class="va">combined_pop</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">county_pop</span>, <span class="va">state_pop</span>, by <span class="op">=</span> <span class="st">"state"</span><span class="op">)</span>
<span class="va">combined_pop</span> <span class="op">&lt;-</span> <span class="fu">nest_join</span><span class="op">(</span><span class="va">combined_pop</span>, <span class="va">us_county</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"county"</span>, <span class="st">"state"</span><span class="op">)</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Regrettably, I have a vague memory of what this code was supposed to do. It reads <code>.csv</code>s containing some state and county population data and does some basic cleaning. The structure of the code is fine, but the implementation is a mess. Magic numbers crop up everywhere (note the obscure <code>...n</code> syntax for selecting the <code>n</code>th column). The column transformations are convoluted, especially the double regex replacement applied to <code>county_pop</code>. The last line uses a nested join, a special <code>dplyr</code> function that groups the matched rows in the right-hand data frame in a list column. I remember thinking that was an appropriate way to handle many-to-many relationships.</p>
<p>It’s easy to tell the author of this snippet was blissfully unaware anyone would have to read or maintain his code. (Don’t snicker - everyone has had Past You pull that that on Present You at some point). Not only did he not know his language’s conventions, he did not know <em>of</em> them.</p>
<p>The code is bad, no doubt. But its innocent sincerity is charming. It reminds me of the days when there seemed nothing wrong with dashing off a chunk of with no clue how it fit into the project it was part of. Naive code can contain other unexpected delights, too. I’ve seen attempts to add factors (an R class for categoricals that cannot be added), heroic attempts to do with <code>for</code> loops what could easily be done with vectorized functions, and every nonstandard variable naming scheme you could think of. Novice programmers so often write logic experienced ones would never even think to try, and I can only respect them for it.</p>
</section><section id="conclusion" class="level1"><h1>Conclusion</h1>
<p>This analogy is strained, I admit. ABBA’s unique brand of lyrics may have got them to #1, but naive code as I describe it above more often leads to frustration and searching for an experienced person to debug it. Helping can be a lot of work, but if you find yourself asked to help, do so. It might have weeks ago, it might have been decades, but you once wrote naive code, too. We all did.</p>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb3" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "The Unexpected Pleasures of Naive Code"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Ryan Heslin"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2023-07-13"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> ["miscellany"]</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="an">urlcolor:</span><span class="co"> "blue"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>As a moderator of a technical Discord server, I've encountered </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>a lot of "naive" code. In computer science, a "naive" solution to a problem </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>is an obvious, straightforward approach someone with no special knowledge might </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>offer as a first attempt. Textbooks often present one before revealing a</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>much more efficient, if less obvious, alternative. <span class="co">[</span><span class="ot">Bubble sort</span><span class="co">](https://en.wikipedia.org/wiki/Bubble_sort)</span> is </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>simple enough that a novice programmer might discover it themselves. </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Merge sort</span><span class="co">](https://en.wikipedia.org/wiki/Merge_sort)</span> is much harder to understand </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>(at least if you're not <span class="co">[</span><span class="ot">John von Neumann</span><span class="co">](https://en.wikipedia.org/wiki/John_von_Neumann)</span>),</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>but it's much more efficient on large inputs.</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>For our purposes, naive code comes from </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>an enthusiastic but inexperienced user trying to solve a problem at the </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>edge of their abilities. </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>Naive code is fascinating. It is rarely good, since its authors know little </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>of sound practices or language conventions. It contains strange design choices </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>and sometimes outright errors. But these same defects make it </span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>oddly charming, as we'll see.</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="fu"># An Analogy</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>Obviously, the best way to illustrate this is to analyze some ABBA lyrics. </span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>Here are the opening lines of "Dancing Queen" (<span class="co">[</span><span class="ot">here</span><span class="co">](https://www.youtube.com/watch?v=xFrGuyw1V8s)</span>, if somehow you haven't heard it before):</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="in">You can dance</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="in">You can jive</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="in">Having the time of your life</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="in">Ooh, see that girl</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="in">Watch that scene</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="in">Digging the dancing queen</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>It's easy to miss on a first listen, but these lyrics don't sound natural </span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>in any widely spoken form of English.</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>"Jive" isn't typically used as a verb. "Scene" isn't typically used to mean </span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>"situation";</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>you would say "check it out" or "look over there," not "watch that scene."</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>Who is the singer addressing, anyway? It seems like the first three lines </span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>refer to the "dancing queen" herself, but the last three address an observer </span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>who is "digging" her.</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>The reason for this is simple. ABBA hail from Sweden; they are songwriters whose first language is Swedish trying hard to sound like </span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>Americans, but not quite passing.</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>But it's hard to notice this beneath the song's amazing arrangement and vocal </span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>performances.</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>What's more, I think the song would be _worse_ if it used more idiomatic English. </span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a> Laden with dated slang they may be, the lyrics feel oddly timeless, because they don't sound like any common form of English.</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>Songs written in authentic 1970s American English usually aren't so lucky. The words </span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>somehow convey the song's message perfectly even though, taken literally, they barely make </span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>sense. </span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>(Related: it bothers me more than it should that <span class="co">[</span><span class="ot">another ABBA song</span><span class="co">](https://www.youtube.com/watch?v=Sj_9CiNkkn4)</span> incorrectly claims Napoleon </span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>surrendered at Waterloo. His army was routed there, but he actually surrendered to a </span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>British warship about a month later. Then again, I doubt even ABBA could make "At Waterloo, Napoleon was decisively defeated" scan). </span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="fu"># Naive Code</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>Naive code is compelling in quite a similar way. I could give examples from </span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>people I've helped, but I won't; they didn't volunteer to be included in my ramblings.</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>Instead, I'll use some very naive code I wrote long ago. </span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>Here is <span class="in">`coivd_19_us.R`</span>, a snippet of R that does some simple data processing.  </span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>Like everyone else in April 2020, I made some visualizations of COVID-19 </span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>data (though unlike most others, I managed to misspell the name of the disease).</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>(If you don't know R, the problems with the code below will still be obvious if you have any programming experience). </span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>state_pop <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"states_pop_data.xlsx"</span>, <span class="at">col_names =</span> F, <span class="at">skip =</span> <span class="dv">9</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">51</span>,] <span class="sc">%&gt;%</span> </span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(...<span class="dv">1</span>, ...<span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">...1 =</span> <span class="fu">str_remove</span>(...<span class="dv">1</span>, <span class="st">"."</span>), <span class="at">...13 =</span> ...<span class="dv">13</span><span class="sc">/</span><span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"state"</span> <span class="ot">=</span> ...<span class="dv">1</span>, <span class="st">"state_pop"</span> <span class="ot">=</span> ...<span class="dv">13</span>) </span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>county_pop <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"county_pop_data.xlsx"</span>, <span class="at">col_names =</span> F, <span class="at">skip =</span> <span class="dv">5</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">3142</span>,] <span class="sc">%&gt;%</span> </span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(...<span class="dv">1</span>, ...<span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(...<span class="dv">1</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"county"</span>, <span class="st">"state"</span>), <span class="at">sep =</span> <span class="st">",</span><span class="sc">\\</span><span class="st">s"</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">county_pop =</span> ...<span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">county =</span> <span class="fu">str_replace</span>(<span class="fu">str_replace</span>(county, <span class="st">"</span><span class="sc">\\</span><span class="st">s[A-Z][a-z]*</span><span class="sc">\\</span><span class="st">s*[A-Z]*[a-z]*$"</span>, <span class="st">""</span>), <span class="st">"^</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>), <span class="at">county_pop =</span> county_pop<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>combined_pop <span class="ot">&lt;-</span> <span class="fu">left_join</span>(county_pop, state_pop, <span class="at">by =</span> <span class="st">"state"</span>)</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>combined_pop <span class="ot">&lt;-</span> <span class="fu">nest_join</span>(combined_pop, us_county, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"county"</span>, <span class="st">"state"</span>))</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>Regrettably, I have a vague memory of what this code was supposed to do. </span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>It reads <span class="in">`.csv`</span>s containing some state and county population data and does some </span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>basic cleaning. The structure of the code is fine, but the implementation is a mess.</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>Magic numbers crop up everywhere (note the obscure <span class="in">`...n`</span> syntax for selecting the </span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a><span class="in">`n`</span>th column). The column transformations are convoluted, especially </span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>the double regex replacement applied to <span class="in">`county_pop`</span>. The last line uses </span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>a nested join, a special <span class="in">`dplyr`</span> function that groups the matched rows in the </span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>right-hand data frame in a list column. I remember thinking that was an </span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>appropriate way to handle many-to-many relationships.</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>It's easy to tell the author of this snippet was blissfully unaware anyone </span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>would have to read or maintain his code. (Don't snicker - everyone has had Past You pull that that </span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>on Present You at some point). Not only did he not know his language's conventions, </span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>he did not know _of_ them. </span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>The code is bad, no doubt. But its innocent sincerity is charming. It </span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>reminds me of the days when there seemed nothing wrong with dashing off a chunk </span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>of with no clue how it fit into the project it was part of. Naive code </span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>can contain other unexpected delights, too. I've seen attempts to add factors </span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>(an R class for categoricals that cannot be added), heroic attempts to do </span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>with <span class="in">`for`</span> loops what could easily be done with vectorized functions, and </span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>every nonstandard variable naming scheme you could think of. Novice </span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>programmers so often write logic experienced ones would never even think </span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>to try, and I can only respect them for it.</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusion</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>This analogy is strained, I admit. ABBA's unique brand of lyrics may have got them to #1, but </span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>naive code as I describe it above more often leads to frustration and </span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>searching for an experienced person to debug it. Helping can be a lot of work, </span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>but if you find yourself asked to </span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>help, do so. It might have weeks ago, it might have been decades, but </span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>you once wrote naive code, too. We all did.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>